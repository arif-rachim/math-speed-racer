(this["webpackJsonpmath-speed-racer"]=this["webpackJsonpmath-speed-racer"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(9),c=n.n(a),r=n(10),o=n(3),i=n(1),u=n.n(i),l=n(11),d=n(6),j=n(8),b=n.n(j);function f(e){var t=e.onEnd,n=Object(i.useContext)(I),a=Object(o.a)(n,2),c=a[0],r=a[1],u=Object(i.useState)(m(c)),l=Object(o.a)(u,2),j=l[0],f=l[1],O=Object(i.useState)(j.answers.length),g=Object(o.a)(O,2),_=g[0],w=g[1],N=Object(i.useState)(0),y=Object(o.a)(N,2),C=y[0],A=y[1],M=c.config.delayBetweenQuestionsInMilliseconds,E=Object(i.useState)(800),P=Object(o.a)(E,2),k=P[0],R=P[1],q=j.questions,J=(q=q||[])&&q[_]&&q[_].length||0;Object(i.useEffect)((function(){return A(0)}),[_]),Object(i.useEffect)(h({activeColumnIndex:C,setActiveColumnIndex:A,columnsEachRow:J,delayBetweenColumnsInMilliseconds:M,activeRowIndex:_,playbackRate:c.config.playbackRate}),[C,J]);var B=j.end.length>0,D=C===J&&!B,Q=v(q,_,C);Object(i.useEffect)(x(r,j),[j]);var T=Object(i.useRef)(null);Object(i.useEffect)(p(T,D),[D]);var W=Object(i.useRef)();Object(i.useEffect)(function(e,t){return function(){return t(e.current.offsetWidth)}}(W,R),[]),Object(i.useEffect)(function(e,t){return function(){e&&t()}}(B,t),[B]);var F=Math.round((_+1)/q.length*100);return Object(s.jsxs)("div",{ref:W,className:b.a.container,children:[Object(s.jsx)("div",{style:{width:"100%",position:"absolute",top:0,background:"rgba(0,0,0,0.1)"},children:Object(s.jsx)("div",{style:{width:"".concat(F,"%"),background:"green",height:10,transition:"width 1000ms ease-in-out"}})}),q.map((function(e,t){return Object(s.jsx)("div",{children:e.map((function(e,n){return Object(s.jsxs)("audio",{"data-audio":"".concat(t,"-").concat(n),children:[Object(s.jsx)("source",{src:"audio/".concat(e,".wav"),type:"audio/wav"}),"Your browser does not support the audio element."]},"".concat(t,"-").concat(n))}))},t)})),Object(s.jsx)("div",{style:{fontSize:.45*k},children:Q}),D&&Object(s.jsx)(S,{containerWidth:k,onAnswer:function(e){e&&(f((function(t){var n=t.answers||[],s=t.durations||[];n[_]=e,s[_]=(new Date).getTime()-T.current.getTime();var a=n.length===t.questions.length;return Object(d.a)(Object(d.a)({},t),{},{answers:n,durations:s,end:a?(new Date).toISOString():""})})),w(_+1))}})]})}function O(e){for(var t=e.totalSums,n=e.questionsEachSum,s=e.digits,a=e.negativePercentage,c=[];c.length<t;){for(var r=[];r.length<n;){var o=parseInt(Array.from({length:s}).map((function(e,t){return 0===t?Math.ceil(9*Math.random()):Math.floor(10*Math.random())})).join(""));o=Math.ceil(10*Math.random())<=10*a?-1*o:o;var i=r.indexOf(o)>=0,u=r.reduce((function(e,t){return e+t}),o)<=0;i||u||r.push(o)}c.push(r)}return c}var h=function(e){var t=e.activeColumnIndex,n=e.setActiveColumnIndex,s=e.columnsEachRow,a=e.delayBetweenColumnsInMilliseconds,c=e.activeRowIndex,r=e.playbackRate;return function(){var e=document.querySelector('[data-audio="'.concat(c,"-").concat(t,'"]'));e?(e.addEventListener("ended",(function(){setTimeout((function(){t<s&&n(t+1)}),a)})),e.playbackRate=r,e.play()):t<s&&n(t+1)}},v=function(e,t,n){try{return e[t][n]}catch(s){}return 0},x=function(e,t){return function(){t.start&&e((function(e){var n=e.sessions.filter((function(e){return e.start!==t.start}));return Object(d.a)(Object(d.a)({},e),{},{sessions:[].concat(Object(l.a)(n),[t])})}))}},p=function(e,t){return function(){t&&(e.current=new Date)}},m=function(e){return function(){var t=e.config,n=e.sessions.filter((function(e){return"end"in e&&0===e.end.length}));return n&&n.length>0?n[0]:{start:(new Date).toISOString(),questions:O(t),answers:[],durations:[],end:""}}},g=function(e){return function(t){t.preventDefault();var n=t.target.elements.answer.value;e(parseInt(n))}};function S(e){var t=e.onAnswer,n=e.containerWidth;return Object(s.jsx)("form",{onSubmit:g(t),children:Object(s.jsx)("input",{style:{fontSize:.3*n},className:b.a.answerBox,name:"answer",autoFocus:!0})})}var _=n(2),w=n.n(_),N="speed-racer-config",y="speed-racer-sessions",C={totalSums:30,questionsEachSum:4,digits:3,negativePercentage:0,delayBetweenQuestionsInMilliseconds:500,playbackRate:1.1},A=function(e){return function(){e(!0)}},I=u.a.createContext({});function M(){var e=Object(i.useState)((function(){return{config:JSON.parse(localStorage.getItem(N)||JSON.stringify(C)),sessions:JSON.parse(localStorage.getItem(y)||JSON.stringify([]))}})),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useCallback)(function(e,t){return function(n){var s,a=n;(s=n)&&"[object Function]"==={}.toString.call(s)&&(a=n(e)),t(a),localStorage.setItem(N,JSON.stringify(a.config)),localStorage.setItem(y,JSON.stringify(a.sessions))}}(n,a),[n]),r=Object(i.useState)(!1),u=Object(o.a)(r,2),l=u[0],d=u[1];return Object(s.jsx)(I.Provider,{value:Object(i.useMemo)((function(){return[n,c]}),[n]),children:Object(s.jsxs)("div",{className:w.a.container,children:[l&&Object(s.jsx)(f,{onEnd:function(){return d(!1)}}),!l&&Object(s.jsx)(k,{setStartSession:d,appContext:n})]})})}var E=function(e){if(!e||!e.questions)return 0;var t,n=0,s=0,a=Object(r.a)(e.questions);try{for(a.s();!(t=a.n()).done;){t.value.reduce((function(e,t){return e+parseInt(t)}),0)===e.answers[n]&&s++,n++}}catch(c){a.e(c)}finally{a.f()}return Math.round(s/e.questions.length*100)},P=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function k(e){var t,n=e.setStartSession,a=e.appContext,c=Object(i.useState)(null===a||void 0===a?void 0:a.sessions[a.sessions.length-1]),r=Object(o.a)(c,2),u=r[0],l=r[1];if(null===u||void 0===u)return Object(s.jsx)("div",{className:w.a.homePage,children:Object(s.jsx)("button",{className:w.a.button,onClick:A(n),children:"Start Session"})});var d,j=a.sessions.indexOf(u),b=j<a.sessions.length-1,f=j>0;return Object(s.jsxs)("div",{className:w.a.homePage,children:[Object(s.jsxs)("div",{className:w.a.buttonContainer,children:[Object(s.jsx)("button",{className:w.a.buttonPrevNext,disabled:!f,onClick:function(){return l(a.sessions[j-1])},children:"Prev Score"}),Object(s.jsx)("div",{style:{flex:1}}),Object(s.jsx)("button",{className:w.a.buttonPrevNext,disabled:!b,onClick:function(){return l(a.sessions[j+1])},children:"Next Score"})]}),Object(s.jsxs)("div",{className:w.a.title,children:[Object(s.jsxs)("div",{className:w.a.score,children:[E(u)," %"]}),Object(s.jsx)("div",{className:w.a.date,children:(d=new Date(u.start),"".concat(d.getDate(),"-").concat(P[d.getMonth()],"-").concat(d.getFullYear()," ").concat(d.getHours(),":").concat(d.getMinutes()))})]}),Object(s.jsx)("div",{className:w.a.tableContainer,children:Object(s.jsxs)("table",{className:w.a.table,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"No"}),Object(s.jsx)("th",{children:"Questions"}),Object(s.jsx)("th",{children:"Answers"}),Object(s.jsx)("th",{children:"Duration"})]})}),Object(s.jsx)("tbody",{children:null===u||void 0===u||null===(t=u.questions)||void 0===t?void 0:t.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t+1}),Object(s.jsx)("td",{children:e.join(",")}),Object(s.jsxs)("td",{className:w.a.tdAnswer,children:[Object(s.jsx)("div",{className:w.a.textCenter,children:u.answers[t]}),"/",Object(s.jsx)("div",{className:w.a.textCenter,children:u.answers[t]?e.reduce((function(e,t){return e+parseInt(t)}),0):""})]}),Object(s.jsx)("td",{children:u.durations[t]})]},t)}))})]})}),Object(s.jsx)("button",{className:w.a.button,onClick:A(n),children:"Start Session"})]})}c.a.render(Object(s.jsx)(M,{}),document.getElementById("root"))},2:function(e,t,n){e.exports={container:"App_container__UuO5q",score:"App_score__3TOys",button:"App_button__24jd2",buttonContainer:"App_buttonContainer__26OuR",buttonPrevNext:"App_buttonPrevNext__8N1I7",table:"App_table__Gqo9z",tdAnswer:"App_tdAnswer__13p1L",textCenter:"App_textCenter__1_IiW",homePage:"App_homePage__26Xma",title:"App_title__oaCjv",date:"App_date__3qQWM",tableContainer:"App_tableContainer__7Pf-r"}},8:function(e,t,n){e.exports={container:"Session_container__1iK6Q",answerBox:"Session_answerBox__XlIO6"}}},[[17,1,2]]]);
//# sourceMappingURL=main.811e5c27.chunk.js.map