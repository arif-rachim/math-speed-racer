(this["webpackJsonpmath-speed-racer"]=this["webpackJsonpmath-speed-racer"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(9),a=n.n(c),r=n(10),o=n(3),i=n(1),u=n.n(i),l=n(11),d=n(6),j=n(8),b=n.n(j);function f(e){var t=e.onEnd,n=Object(i.useContext)(I),c=Object(o.a)(n,2),a=c[0],r=c[1],u=Object(i.useState)(p(a)),l=Object(o.a)(u,2),j=l[0],f=l[1],O=Object(i.useState)(j.answers.length),_=Object(o.a)(O,2),S=_[0],w=_[1],N=Object(i.useState)(0),C=Object(o.a)(N,2),A=C[0],y=C[1],E=a.config.delayBetweenQuestionsInMilliseconds,M=Object(i.useState)(800),P=Object(o.a)(M,2),q=P[0],R=P[1],D=j.questions,B=(D=D||[])&&D[S]&&D[S].length||0;Object(i.useEffect)((function(){return y(0)}),[S]),Object(i.useEffect)(h({activeColumnIndex:A,setActiveColumnIndex:y,columnsEachRow:B,delayBetweenColumnsInMilliseconds:E,activeRowIndex:S}),[A,B]);var k=j.end.length>0,J=A===B&&!k,Q=v(D,S,A);Object(i.useEffect)(x(r,j),[j]);var T=Object(i.useRef)(null);Object(i.useEffect)(m(T,J),[J]);var W=Object(i.useRef)();return Object(i.useEffect)(function(e,t){return function(){return t(e.current.offsetWidth)}}(W,R),[]),Object(i.useEffect)(function(e,t){return function(){e&&t()}}(k,t),[k]),Object(s.jsxs)("div",{ref:W,className:b.a.container,children:[D.map((function(e,t){return Object(s.jsx)("div",{children:e.map((function(e,n){return Object(s.jsxs)("audio",{"data-audio":"".concat(t,"-").concat(n),children:[Object(s.jsx)("source",{src:"audio/".concat(e,".wav"),type:"audio/wav"}),"Your browser does not support the audio element."]},"".concat(t,"-").concat(n))}))},t)})),Object(s.jsx)("div",{style:{fontSize:.45*q},children:Q}),J&&Object(s.jsx)(g,{containerWidth:q,onAnswer:function(e){e&&(f((function(t){var n=t.answers||[],s=t.durations||[];n[S]=e,s[S]=(new Date).getTime()-T.current.getTime();var c=n.length===t.questions.length;return Object(d.a)(Object(d.a)({},t),{},{answers:n,durations:s,end:c?(new Date).toISOString():""})})),w(S+1))}})]})}function O(e){for(var t=e.totalSums,n=e.questionsEachSum,s=e.digits,c=e.negativePercentage,a=[];a.length<t;){for(var r=[];r.length<n;){var o=parseInt(Array.from({length:s}).map((function(e,t){return 0===t?Math.ceil(9*Math.random()):Math.floor(10*Math.random())})).join(""));o=Math.ceil(10*Math.random())<=10*c?-1*o:o;var i=r.indexOf(o)>=0,u=r.reduce((function(e,t){return e+t}),o)<=0;i||u||r.push(o)}a.push(r)}return a}var h=function(e){var t=e.activeColumnIndex,n=e.setActiveColumnIndex,s=e.columnsEachRow,c=e.delayBetweenColumnsInMilliseconds,a=e.activeRowIndex;return function(){var e=document.querySelector('[data-audio="'.concat(a,"-").concat(t,'"]'));e?(e.addEventListener("ended",(function(){setTimeout((function(){t<s&&n(t+1)}),c)})),e.playbackRate=1.4,e.play()):t<s&&n(t+1)}},v=function(e,t,n){try{return e[t][n]}catch(s){}return 0},x=function(e,t){return function(){t.start&&e((function(e){var n=e.sessions.filter((function(e){return e.start!==t.start}));return Object(d.a)(Object(d.a)({},e),{},{sessions:[].concat(Object(l.a)(n),[t])})}))}},m=function(e,t){return function(){t&&(e.current=new Date)}},p=function(e){return function(){var t=e.config,n=e.sessions.filter((function(e){return"end"in e&&0===e.end.length}));return n&&n.length>0?n[0]:{start:(new Date).toISOString(),questions:O(t),answers:[],durations:[],end:""}}},_=function(e){return function(t){t.preventDefault();var n=t.target.elements.answer.value;e(parseInt(n))}};function g(e){var t=e.onAnswer,n=e.containerWidth;return Object(s.jsx)("form",{onSubmit:_(t),children:Object(s.jsx)("input",{style:{fontSize:.3*n},className:b.a.answerBox,name:"answer",autoFocus:!0})})}var S=n(2),w=n.n(S),N="SPEED_RACER",C={config:{totalSums:30,questionsEachSum:4,digits:3,negativePercentage:0,delayBetweenQuestionsInMilliseconds:500},sessions:[]},A=function(e){return function(){e(!0)}},I=u.a.createContext({});function y(){var e=Object(i.useState)(JSON.parse(localStorage.getItem(N)||JSON.stringify(C))),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useCallback)(function(e,t){return function(n){var s,c=n;(s=n)&&"[object Function]"==={}.toString.call(s)&&(c=n(e)),t(c),localStorage.setItem(N,JSON.stringify(c))}}(n,c),[n]),r=Object(i.useState)(!1),u=Object(o.a)(r,2),l=u[0],d=u[1];return Object(s.jsx)(I.Provider,{value:Object(i.useMemo)((function(){return[n,a]}),[n]),children:Object(s.jsxs)("div",{className:w.a.container,children:[l&&Object(s.jsx)(f,{onEnd:function(){return d(!1)}}),!l&&Object(s.jsx)(P,{setStartSession:d,appContext:n})]})})}var E=function(e){if(!e||!e.questions)return 0;var t,n=0,s=0,c=Object(r.a)(e.questions);try{for(c.s();!(t=c.n()).done;){t.value.reduce((function(e,t){return e+parseInt(t)}),0)===e.answers[n]&&s++,n++}}catch(a){c.e(a)}finally{c.f()}return Math.round(s/e.questions.length*100)},M=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function P(e){var t,n=e.setStartSession,c=e.appContext,a=Object(i.useState)(null===c||void 0===c?void 0:c.sessions[c.sessions.length-1]),r=Object(o.a)(a,2),u=r[0],l=r[1];if(null===u||void 0===u)return Object(s.jsx)("div",{className:w.a.homePage,children:Object(s.jsx)("button",{className:w.a.button,onClick:A(n),children:"Start Session"})});var d,j=c.sessions.indexOf(u),b=j<c.sessions.length-1,f=j>0;return Object(s.jsxs)("div",{className:w.a.homePage,children:[Object(s.jsxs)("div",{className:w.a.buttonContainer,children:[Object(s.jsx)("button",{className:w.a.buttonPrevNext,disabled:!f,onClick:function(){return l(c.sessions[j-1])},children:"Prev Score"}),Object(s.jsx)("div",{style:{flex:1}}),Object(s.jsx)("button",{className:w.a.buttonPrevNext,disabled:!b,onClick:function(){return l(c.sessions[j+1])},children:"Next Score"})]}),Object(s.jsxs)("div",{className:w.a.title,children:[Object(s.jsxs)("div",{className:w.a.score,children:[E(u)," %"]}),Object(s.jsx)("div",{className:w.a.date,children:(d=new Date(u.start),"".concat(d.getDate(),"-").concat(M[d.getMonth()],"-").concat(d.getFullYear()," ").concat(d.getHours(),":").concat(d.getMinutes()))})]}),Object(s.jsx)("div",{className:w.a.tableContainer,children:Object(s.jsxs)("table",{className:w.a.table,children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"No"}),Object(s.jsx)("th",{children:"Questions"}),Object(s.jsx)("th",{children:"Answers"}),Object(s.jsx)("th",{children:"Duration"})]}),Object(s.jsx)("tbody",{children:null===u||void 0===u||null===(t=u.questions)||void 0===t?void 0:t.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t+1}),Object(s.jsx)("td",{children:e.join(",")}),Object(s.jsxs)("td",{className:w.a.tdAnswer,children:[Object(s.jsx)("div",{className:w.a.textCenter,children:u.answers[t]}),"/",Object(s.jsx)("div",{className:w.a.textCenter,children:u.answers[t]?e.reduce((function(e,t){return e+parseInt(t)}),0):""})]}),Object(s.jsx)("td",{children:u.durations[t]})]},t)}))})]})}),Object(s.jsx)("button",{className:w.a.button,onClick:A(n),children:"Start Session"})]})}a.a.render(Object(s.jsx)(y,{}),document.getElementById("root"))},2:function(e,t,n){e.exports={container:"App_container__UuO5q",score:"App_score__3TOys",button:"App_button__24jd2",buttonContainer:"App_buttonContainer__26OuR",buttonPrevNext:"App_buttonPrevNext__8N1I7",table:"App_table__Gqo9z",tdAnswer:"App_tdAnswer__13p1L",textCenter:"App_textCenter__1_IiW",homePage:"App_homePage__26Xma",title:"App_title__oaCjv",date:"App_date__3qQWM",tableContainer:"App_tableContainer__7Pf-r"}},8:function(e,t,n){e.exports={container:"Session_container__1iK6Q",answerBox:"Session_answerBox__XlIO6"}}},[[17,1,2]]]);
//# sourceMappingURL=main.cd842fbc.chunk.js.map