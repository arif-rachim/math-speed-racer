(this["webpackJsonpmath-speed-racer"]=this["webpackJsonpmath-speed-racer"]||[]).push([[0],{2:function(e,t,n){e.exports={container:"App_container__UuO5q",score:"App_score__3TOys",button:"App_button__24jd2",buttonContainer:"App_buttonContainer__26OuR",buttonPrevNext:"App_buttonPrevNext__8N1I7",table:"App_table__Gqo9z",tdAnswer:"App_tdAnswer__13p1L",textCenter:"App_textCenter__1_IiW",homePage:"App_homePage__26Xma",title:"App_title__oaCjv",date:"App_date__3qQWM",tableContainer:"App_tableContainer__7Pf-r"}},20:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(11),c=n.n(a),r=n(12),o=n(3),i=n(1),u=n.n(i),l=n(10),d=n(8),j=n.n(d),b=n(13),f=n(4),O=n(9),h=n.n(O);function v(e){var t=e.onEnd,n=Object(i.useContext)(P),a=Object(o.a)(n,2),c=a[0],r=a[1],u=Object(i.useState)(_(c)),l=Object(o.a)(u,2),d=l[0],j=l[1],b=Object(i.useState)(d.answers.length),O=Object(o.a)(b,2),v=O[0],x=O[1],m=Object(i.useState)(0),N=Object(o.a)(m,2),C=N[0],A=N[1],I=c.config.delayBetweenQuestionsInMilliseconds,M=Object(i.useState)(800),k=Object(o.a)(M,2),E=k[0],q=k[1],R=d.questions,J=(R=R||[])&&R[v]&&R[v].length||0;Object(i.useEffect)((function(){return A(0)}),[v]),Object(i.useEffect)(p({activeColumnIndex:C,setActiveColumnIndex:A,columnsEachRow:J,delayBetweenColumnsInMilliseconds:I,activeRowIndex:v,playbackRate:c.config.playbackRate}),[C,J]);var B=d.end.length>0,D=C===J&&!B,Q=g(R,v,C);Object(i.useEffect)(w(r,d),[d]);var T=Object(i.useRef)(null);Object(i.useEffect)(S(T,D),[D]);var W=Object(i.useRef)();Object(i.useEffect)(function(e,t){return function(){return t(e.current.offsetWidth)}}(W,q),[]),Object(i.useEffect)(function(e,t){return function(){e&&t()}}(B,t),[B]);var F=Math.round((v+1)/R.length*100);return Object(s.jsxs)("div",{ref:W,className:h.a.container,children:[Object(s.jsx)("div",{style:{width:"100%",position:"absolute",top:0,background:"rgba(0,0,0,0.1)"},children:Object(s.jsx)("div",{style:{width:"".concat(F,"%"),background:"green",height:10,transition:"width 1000ms ease-in-out"}})}),R.map((function(e,t){return Object(s.jsx)("div",{children:e.map((function(e,n){var a=e<0;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("audio",{"data-audio":"".concat(t,"-").concat(n),children:[Object(s.jsx)("source",{src:"audio/".concat(e,".wav"),type:"audio/wav"}),"Your browser does not support the audio element."]}),a&&Object(s.jsxs)("audio",{"data-audio":"".concat(t,"-").concat(n,"-negative"),children:[Object(s.jsx)("source",{src:"audio/1.wav",type:"audio/wav"}),"Your browser does not support the audio element."]})]},"".concat(t,"-").concat(n))}))},t)})),Object(s.jsx)("div",{style:{fontSize:.45*E},children:Q}),D&&Object(s.jsx)(y,{containerWidth:E,onAnswer:function(e){e&&(j((function(t){var n=t.answers||[],s=t.durations||[];n[v]=e,s[v]=(new Date).getTime()-T.current.getTime();var a=n.length===t.questions.length;return Object(f.a)(Object(f.a)({},t),{},{answers:n,durations:s,end:a?(new Date).toISOString():""})})),x(v+1))}})]})}function x(e){for(var t=e.totalSums,n=e.questionsEachSum,s=e.digits,a=e.negativePercentage,c=[];c.length<t;){for(var r=[];r.length<n;){var o=parseInt(Array.from({length:s}).map((function(e,t){return 0===t?Math.ceil(9*Math.random()):Math.floor(10*Math.random())})).join(""));o=Math.ceil(10*Math.random())<=10*a?-1*o:o;var i=r.indexOf(o)>=0,u=r.reduce((function(e,t){return e+t}),o)<=0;i||u||r.push(o)}c.push(r)}return c}var p=function(e){var t=e.activeColumnIndex,n=e.setActiveColumnIndex,s=e.columnsEachRow,a=e.delayBetweenColumnsInMilliseconds,c=e.activeRowIndex,r=e.playbackRate;return Object(b.a)(j.a.mark((function e(){var o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="".concat(c,"-").concat(t),!(i=document.querySelector('[data-audio="'.concat(o,'"]')))){e.next=8;break}return e.next=5,m(i,a,r);case 5:t<s&&n(t+1),e.next=9;break;case 8:t<s&&n(t+1);case 9:case"end":return e.stop()}}),e)})))},m=function(e,t,n){return new Promise((function(s){e.addEventListener("ended",(function(){setTimeout((function(){s(!0)}),t)}),!0),e.playbackRate=n,e.play()}))},g=function(e,t,n){try{return e[t][n]}catch(s){}return 0},w=function(e,t){return function(){t.start&&e((function(e){var n=e.sessions.filter((function(e){return e.start!==t.start}));return Object(f.a)(Object(f.a)({},e),{},{sessions:[].concat(Object(l.a)(n),[t])})}))}},S=function(e,t){return function(){t&&(e.current=new Date)}},_=function(e){return function(){var t=e.config,n=e.sessions.filter((function(e){return"end"in e&&0===e.end.length}));if(n&&n.length>0){var s,a=n[0],c=a.answers.length,r=a.questions.length;return(s=a.questions).splice.apply(s,[c,r-c].concat(Object(l.a)(x(Object(f.a)(Object(f.a)({},t),{},{totalSums:r-c}))))),a}return{start:(new Date).toISOString(),questions:x(t),answers:[],durations:[],end:""}}},N=function(e){return function(t){t.preventDefault();var n=t.target.elements.answer.value;e(parseInt(n))}};function y(e){var t=e.onAnswer,n=e.containerWidth;return Object(s.jsx)("form",{onSubmit:N(t),children:Object(s.jsx)("input",{style:{fontSize:.3*n},className:h.a.answerBox,name:"answer",autoFocus:!0})})}var C=n(2),A=n.n(C),I="speed-racer-config",M="speed-racer-sessions",k={totalSums:30,questionsEachSum:4,digits:3,negativePercentage:0,delayBetweenQuestionsInMilliseconds:500,playbackRate:1.2},E=function(e){return function(){e(!0)}},P=u.a.createContext({});function q(){var e=Object(i.useState)((function(){return{config:JSON.parse(localStorage.getItem(I)||JSON.stringify(k)),sessions:JSON.parse(localStorage.getItem(M)||JSON.stringify([]))}})),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useCallback)(function(e,t){return function(n){var s,a=n;(s=n)&&"[object Function]"==={}.toString.call(s)&&(a=n(e)),t(a),localStorage.setItem(I,JSON.stringify(a.config)),localStorage.setItem(M,JSON.stringify(a.sessions))}}(n,a),[n]),r=Object(i.useState)(!1),u=Object(o.a)(r,2),l=u[0],d=u[1];return Object(s.jsx)(P.Provider,{value:Object(i.useMemo)((function(){return[n,c]}),[n]),children:Object(s.jsxs)("div",{className:A.a.container,children:[l&&Object(s.jsx)(v,{onEnd:function(){return d(!1)}}),!l&&Object(s.jsx)(B,{setStartSession:d,appContext:n})]})})}var R=function(e){if(!e||!e.questions)return 0;var t,n=0,s=0,a=Object(r.a)(e.questions);try{for(a.s();!(t=a.n()).done;){t.value.reduce((function(e,t){return e+parseInt(t)}),0)===e.answers[n]&&s++,n++}}catch(c){a.e(c)}finally{a.f()}return Math.round(s/e.questions.length*100)},J=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function B(e){var t,n=e.setStartSession,a=e.appContext,c=Object(i.useState)(null===a||void 0===a?void 0:a.sessions[a.sessions.length-1]),r=Object(o.a)(c,2),u=r[0],l=r[1];if(null===u||void 0===u)return Object(s.jsx)("div",{className:A.a.homePage,children:Object(s.jsx)("button",{className:A.a.button,onClick:E(n),children:"Start Session"})});var d,j=a.sessions.indexOf(u),b=j<a.sessions.length-1,f=j>0;return Object(s.jsxs)("div",{className:A.a.homePage,children:[Object(s.jsxs)("div",{className:A.a.buttonContainer,children:[Object(s.jsx)("button",{className:A.a.buttonPrevNext,disabled:!f,onClick:function(){return l(a.sessions[j-1])},children:"Prev Score"}),Object(s.jsx)("div",{style:{flex:1}}),Object(s.jsx)("button",{className:A.a.buttonPrevNext,disabled:!b,onClick:function(){return l(a.sessions[j+1])},children:"Next Score"})]}),Object(s.jsxs)("div",{className:A.a.title,children:[Object(s.jsxs)("div",{className:A.a.score,children:[R(u)," %"]}),Object(s.jsx)("div",{className:A.a.date,children:(d=new Date(u.start),"".concat(d.getDate(),"-").concat(J[d.getMonth()],"-").concat(d.getFullYear()," ").concat(d.getHours(),":").concat(d.getMinutes()))})]}),Object(s.jsx)("div",{className:A.a.tableContainer,children:Object(s.jsxs)("table",{className:A.a.table,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"No"}),Object(s.jsx)("th",{children:"Questions"}),Object(s.jsx)("th",{children:"Answers"}),Object(s.jsx)("th",{children:"Duration"})]})}),Object(s.jsx)("tbody",{children:null===u||void 0===u||null===(t=u.questions)||void 0===t?void 0:t.map((function(e,t){var n=u.answers[t]>0;return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t+1}),Object(s.jsx)("td",{children:n?e.join(","):"-"}),Object(s.jsxs)("td",{className:A.a.tdAnswer,children:[Object(s.jsx)("div",{className:A.a.textCenter,children:u.answers[t]||"-"}),"/",Object(s.jsx)("div",{className:A.a.textCenter,children:u.answers[t]?e.reduce((function(e,t){return e+parseInt(t)}),0):"-"})]}),Object(s.jsx)("td",{children:u.durations[t]||"-"})]},t)}))})]})}),Object(s.jsx)("button",{className:A.a.button,onClick:E(n),children:"Start Session"})]})}c.a.render(Object(s.jsx)(q,{}),document.getElementById("root"))},9:function(e,t,n){e.exports={container:"Session_container__1iK6Q",answerBox:"Session_answerBox__XlIO6"}}},[[20,1,2]]]);
//# sourceMappingURL=main.6a038dc2.chunk.js.map